{
  "mcpServers": {
{%- set servers = [] -%}
{%- if mcp_filesystem_enabled and _mcp_filesystem_available -%}
  {%- set _ = servers.append({
    'name': 'filesystem',
    'config': {
      'type': 'stdio',
      'command': 'docker',
      'args': [
        'exec', '-i', 'mcp-filesystem',
        'npx', '@modelcontextprotocol/server-filesystem',
        claude_code_home + '/src',
        claude_code_home + '/projects',
        claude_code_home + '/Documents'
      ],
      'env': {}
    }
  }) -%}
{%- endif -%}
{%- if mcp_ref_enabled and _mcp_ref_available -%}
  {%- set _ = servers.append({
    'name': 'ref',
    'config': {
      'type': 'stdio',
      'command': 'docker',
      'args': ['exec', '-i', 'mcp-ref', 'npx', '@upstash/context7-mcp'],
      'env': {}
    }
  }) -%}
{%- endif -%}
{%- if mcp_docker_enabled and _mcp_docker_available -%}
  {%- set _ = servers.append({
    'name': 'docker',
    'config': {
      'type': 'stdio',
      'command': 'docker',
      'args': ['exec', '-i', 'mcp-docker', 'mcp-server-docker'],
      'env': {}
    }
  }) -%}
{%- endif -%}
{%- for server in servers %}
    "{{ server.name }}": {{ server.config | to_nice_json | indent(6) }}{{ "," if not loop.last else "" }}
{%- endfor %}
  }
}
